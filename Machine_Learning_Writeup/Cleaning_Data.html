<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="Generator" content="iWeb 3.0.1" />
    <meta name="iWeb-Build" content="local-build-20170302" />
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <meta name="viewport" content="width=700" />
    <title>Cleaning Data</title>
    <link rel="stylesheet" type="text/css" media="screen,print" href="Cleaning_Data_files/Cleaning_Data.css" />
    <!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Cleaning_Data_files/Cleaning_DataIE.css'/><![endif]-->
    <!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
    <script type="text/javascript" src="Scripts/iWebSite.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/SharedResources/WidgetCommon.js"></script>
    <script type="text/javascript" src="Scripts/Widgets/Navbar/navbar.js"></script>
    <script type="text/javascript" src="Cleaning_Data_files/Cleaning_Data.js"></script>
  </head>
  <body style="background: rgb(255, 255, 255); margin: 0pt; " onload="onPageLoad();" onunload="onPageUnload();">
    <div style="text-align: center; ">
      <div style="margin-bottom: 0px; margin-left: auto; margin-right: auto; margin-top: 0px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 700px; " id="body_content">
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 0; " id="nav_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div class="com-apple-iweb-widget-navbar flowDefining" id="widget0" style="margin-left: 35px; margin-top: 0px; opacity: 1.00; position: relative; width: 630px; z-index: 1; ">
    
            <div id="widget0-navbar" class="navbar">

      
              <div id="widget0-bg" class="navbar-bg">

        
                <ul id="widget0-navbar-list" class="navbar-list">
 <li></li> 
</ul>
                
      
</div>
              
    
</div>
          </div>
          <script type="text/javascript"><!--//--><![CDATA[//><!--
new NavBar('widget0', 'Scripts/Widgets/Navbar', 'Scripts/Widgets/SharedResources', '.', {"path-to-root": "", "navbar-css": ".navbar {\n\tfont-family: Arial, sans-serif;\n\tfont-size: 1em;\n\tcolor: #666;\n\tmargin: 9px 0px 6px 0px;\n\tline-height: 30px;\n}\n\n.navbar-bg {\n\ttext-align: center;\n}\n\n.navbar-bg ul {\n\tlist-style: none;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n\nli {\n\tlist-style-type: none;\n\tdisplay: inline;\n\tpadding: 0px 10px 0px 10px;\n}\n\n\nli a {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:visited {\n\ttext-decoration: none;\n\tcolor: #666;\n}\n\nli a:hover\r{\r\n \tcolor: #463C3C;\n\ttext-decoration: none;\r}\n\n\nli.current-page a\r{\r\t color: #463C3C;\n\ttext-decoration: none;\n\tfont-weight: bold;\r\r}\n", "current-page-GUID": "9AA017C5-9B40-4B90-98CB-19FB0BDCE43B", "isCollectionPage": "NO"});
//--><!]]></script>
          <div style="clear: both; height: 0px; line-height: 0px; " class="spacer"> </div>
        </div>
        <div style="float: left; height: 0px; line-height: 0px; margin-left: 0px; position: relative; width: 700px; z-index: 10; " id="header_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div style="height: 1px; width: 630px;  height: 1px; left: 35px; position: absolute; top: 3px; width: 630px; z-index: 1; " class="tinyText">
            <div style="position: relative; width: 630px; ">
              <img src="Cleaning_Data_files/shapeimage_1.jpg" alt="" style="height: 1px; left: 0px; position: absolute; top: 0px; width: 630px; " />
            </div>
          </div>
        </div>
        <div style="margin-left: 0px; position: relative; width: 700px; z-index: 5; " id="body_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
          <div id="id1" style="height: 32px; left: 35px; position: absolute; top: 32px; width: 630px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content graphic_shape_layout_style_default_External_630_32" style="padding: 0px; ">
              <div class="graphic_shape_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Cleaning the Data</p>
              </div>
            </div>
          </div>
          


          <div id="id2" style="height: 255px; left: 35px; position: absolute; top: 73px; width: 630px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_630_255" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="paragraph_style_1">To begin I examined the data. The dataset itself was moderate in size (19,000 rows by 160 columns) yet many of the columns were missing data. I first removed the id column. Within the dataset it seemed that all data was recorded when an observation began but that nearly 100 columns of data were blank in every subsequent row until a new observation. The number of rows in an observation was on the order of tens (10 – 20) and rather than try to impute values, and because random forest calculations are 'sensitive' to missing (NA) data, I removed these rows. This left me with a dataset of the same number of rows (observations) but approximately 50 columns.<br /></p>
                <p class="paragraph_style_1"><br /></p>
                <p class="paragraph_style_1">Next, I chose to scan these columns for 'near zero variations' and again for columns that were highly correlated. To complete the correlation functions I removed any columns that weren't recorded as integers (7).<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id3" style="height: 32px; left: 35px; position: absolute; top: 328px; width: 630px; z-index: 1; " class="style_SkipStroke shape-with-text">
            <div class="text-content graphic_shape_layout_style_default_External_630_32" style="padding: 0px; ">
              <div class="graphic_shape_layout_style_default">
                <p style="padding-bottom: 0pt; padding-top: 0pt; " class="paragraph_style">Initial Models</p>
              </div>
            </div>
          </div>
          


          <div id="id4" style="height: 207px; left: 85px; position: absolute; top: 364px; width: 483px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_483_207" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="paragraph_style_2">Call:<br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1"> </span>randomForest(formula = classe ~ ., data = clean_training_data) <br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">               </span>Type of random forest: classification<br /></p>
                <p class="paragraph_style_3">                     <span style="line-height: 13px; " class="style_2">Number of trees: 500<br /></span></p>
                <p class="paragraph_style_2">No. of variables tried at each split: 7<br /></p>
                <p class="paragraph_style_3"><br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">        </span>OOB estimate of  error rate: 0.11%<br /></p>
                <p class="paragraph_style_2">Confusion matrix:<br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">     </span>A    B    C    D    E  class.error<br /></p>
                <p class="paragraph_style_2">A 4464    0    0    0    0 0.0000000000<br /></p>
                <p class="paragraph_style_2">B    1 3037    0    0    0 0.0003291639<br /></p>
                <p class="paragraph_style_2">C    0    4 2730    4    0 0.0029218408<br /></p>
                <p class="paragraph_style_2">D    0    0    4 2567    2 0.0023319083<br /></p>
                <p class="paragraph_style_2">E    0    0    0    2 2884 0.0006930007<span style="line-height: 16px; " class="style_3"><br /></span></p>
              </div>
            </div>
          </div>
          


          <div id="id5" style="height: 75px; left: 35px; position: absolute; top: 570px; width: 630px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_630_75" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="paragraph_style_4">The second model building algorithm that I ran was a method (cforest) inside the caret package.  I ran this with the train command and specified a certain type of cross-validation:<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id6" style="height: 57px; left: 85px; position: absolute; top: 612px; width: 483px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_483_57" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="paragraph_style_2"><span style="line-height: 16px; " class="style_3"><br /></span></p>
                <p style="padding-bottom: 0pt; " class="paragraph_style_5">trainControl(method= &quot;repeatedcv&quot;, number= 5, repeats= 1, verboseIter = TRUE)</p>
              </div>
            </div>
          </div>
          


          <div id="id7" style="height: 94px; left: 35px; position: absolute; top: 661px; width: 630px; z-index: 1; " class="style_SkipStroke_1 shape-with-text">
            <div class="text-content style_External_630_94" style="padding: 0px; ">
              <div class="style">
                <p style="padding-top: 0pt; " class="paragraph_style_1"><br /></p>
                <p class="paragraph_style_4"> this last setting allowed me to monitor the progress of the algorithm (running on Ubuntu 14.04) as it ran.  It did take significantly longer to complete than the simple randomForest.<br /></p>
              </div>
            </div>
          </div>
          


          <div id="id8" style="height: 256px; left: 98px; position: absolute; top: 745px; width: 457px; z-index: 1; " class="style_SkipStroke_2 shape-with-text">
            <div class="text-content graphic_textbox_layout_style_default_External_457_256" style="padding: 0px; ">
              <div class="graphic_textbox_layout_style_default">
                <p style="padding-top: 0pt; " class="paragraph_style_2">Conditional Inference Random Forest <br /></p>
                <p class="paragraph_style_3"><br /></p>
                <p class="paragraph_style_2">15699 samples<br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">   </span>58 predictors<br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">    </span>5 classes: 'A', 'B', 'C', 'D', 'E' <br /></p>
                <p class="paragraph_style_3"><br /></p>
                <p class="paragraph_style_2">No pre-processing<br /></p>
                <p class="paragraph_style_2">Resampling: Cross-Validated (5 fold, repeated 1 times) <br /></p>
                <p class="paragraph_style_2">Summary of sample sizes: 12559, 12561, 12560, 12557, 12559 <br /></p>
                <p class="paragraph_style_2">Resampling results across tuning parameters:<br /></p>
                <p class="paragraph_style_3"><br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">  </span>mtry  Accuracy   Kappa    <br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">   </span>3.5  0.9468123  0.9325959<br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">   </span>7.0  0.9773880  0.9713841<br /></p>
                <p class="paragraph_style_2"><span style="line-height: 11px; " class="style_1">  </span>14.0  0.9780251  0.9721982<br /></p>
                <p class="paragraph_style_3"><br /></p>
                <p class="paragraph_style_2">Accuracy was used to select the optimal model using  the largest value.<br /></p>
                <p class="paragraph_style_2">The final value used for the model was mtry = 14. <br /></p>
              </div>
            </div>
          </div>
          <div style="height: 1001px; line-height: 1001px; " class="spacer"> </div>
        </div>
        <div style="height: 150px; margin-left: 0px; position: relative; width: 700px; z-index: 15; " id="footer_layer">
          <div style="height: 0px; line-height: 0px; " class="bumper"> </div>
        </div>
      </div>
    </div>
  </body>
</html>


